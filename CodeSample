private boolean validateFields(PDAcroForm form, List<String> mandatoryFields) {
    for (String fieldName : mandatoryFields) {
        PDField field = form.getField(fieldName);
        if (field == null) {
            System.out.println("Field " + fieldName + " not found.");
            return false;
        } else if (field instanceof PDTextField && ((PDTextField) field).getValueAsString().isEmpty()) {
            System.out.println("Field " + fieldName + " is empty.");
            return false;
        }
    }
    return true;
}

private void processPdf(String path) {
    try (PDDocument doc = PDDocument.load(new File(path))) {
        PDAcroForm form = doc.getDocumentCatalog().getAcroForm();

        // Your existing code to manipulate the PDF form fields and set actions

        List<String> mandatoryFieldList = getMandatoryPdfFields();

        // Validate mandatory fields
        if (!validateFields(form, mandatoryFieldList)) {
            System.out.println("Validation failed. PDF not saved or printed.");
            return; // Exit without saving or printing
        }

        // Save the PDF after validation passes
        doc.save(new File("test_" + path));
    } catch (IOException e) {
        e.printStackTrace();
    }
}
