public Token getToken(boolean reload) {
    log.begin(GET_TOKEN);
    Token token = null;
    try {
        if (reload) {
            token = getTokenFromHost();
            cacheToken(token);
            log.info(GET_TOKEN, String.format("Setting cache with newly generated token: %s", system));
        } else {
            token = getCachedToken();
            if (token == null || token.isTokenExpired()) {
                log.info("Token is expired, getting from host");
                token = getTokenFromHost();
                cacheToken(token);
                log.info(GET_TOKEN, String.format("Setting cache with newly generated token: %s", system));
            } else if (isThresholdReached()) {
                log.info(GET_TOKEN, "Threshold reached, getting new token from host");
                token = getTokenFromHost();
                cacheToken(token);
                log.info(GET_TOKEN, String.format("New token generation complete and cached: %s", system));
            }
        }
    } catch (Exception exception) {
        log.error(GET_TOKEN, "Error occurred during token creation:", exception);
    }
    log.end(GET_TOKEN);
    return token;
}
